var srvTHF={cache:{},Set:function(e,t){srvTHF.cache[e]=t},Get:function(e){return JH.GetJsonValue(srvTHF,"cache."+e)},SetLang:function(e){srvTHF.Set("lang",e)},NumFormat:function(e){return"function"!=typeof numeral?"":""===e?"":numeral(e).format("0,0.00")},DateFormat:function(e){return JH.DateFormat(e,"YYYY-MM-DD")},GetValue:function(source,value,oper,term,data){for(var i=0;i<source.length;i++){var s=source[i];switch(s[oper]){case"between":if(value>=s.term&&value<=s.term_2)return JH.GetJsonValue(s,data);break;default:if(eval(value+s[oper]+s[term]))return JH.GetJsonValue(s,data)}}return""},GenMarker:function(e,t,r){if("object"!=typeof L)return null;var a=L.divIcon({className:r,iconSize:L.point(15,15)});return L.marker(e,{icon:a,properties:t})},SetRain_Setting:function(e){srvTHF.Set("Rain_scale",JH.GetJsonValue(e,"scale")),srvTHF.Set("Rain_level_color",JH.GetJsonValue(e,"level_color")),srvTHF.Set("Rain_rule",JH.GetJsonValue(e,"rule"))},renderModalRainTable:function(){var e=srvTHF.GetRain_Level_Color(),t=$("#modal-rain-table").find("tbody");for(var r in e){var a=e[r],n=document.createElement("tr"),l=document.createElement("td"),o=document.createElement("td");l.bgColor=JH.GetJsonValue(a,"color"),o.innerText=TRANSLATOR[JH.GetJsonValue(a,"trans")],n.appendChild(l),n.appendChild(o),t.append(n)}},GetRain_Sacle:function(){return srvTHF.Get("Rain_scale")},GetRain_Level_Color:function(){return srvTHF.Get("Rain_level_color")},GetRain_Rule:function(){return srvTHF.Get("Rain_rule")},Rain_GetColor:function(e){return srvTHF.GetValue(srvTHF.GetRain_Sacle(),e,"operator","term","color")},Rain_GetColorname:function(e){return srvTHF.GetValue(srvTHF.GetRain_Sacle(),e,"operator","term","colorname")},Rain_GetRuleLevel:function(e,t,r){return srvTHF.GetValue(JH.GetJsonValue(srvTHF.GetRain_Rule(),e),t,"operator",r,"level")},Rain_GetLevelColor:function(e){return JH.GetJsonValue(srvTHF.GetRain_Level_Color(),e)},Rain_Marker:function(e,t,r){return srvTHF.GenMarker(e,t,"user-marker user-marker-rain user-marker-rain-"+r)},SetWaterLevel_Setting:function(e){srvTHF.Set("WaterLevel_scale",JH.GetJsonValue(e,"scale")),srvTHF.Set("WaterLevel_rule",JH.GetJsonValue(e,"rule")),srvTHF.Set("WaterLevel_level",JH.GetJsonValue(e,"level")),srvTHF.Set("WaterLevel_no_storage",JH.GetJsonValue(e,"no_storage")),srvTHF.Set("WaterLevel_not_today",JH.GetJsonValue(e,"not_today"))},SetCCTV_Setting:function(e){srvTHF.Set("cctv_scale",JH.GetJsonValue(e,"media_type"));JH.GetJsonValue(e,"media_type")},renderModalWaterlevelTable:function(){var e=srvTHF.GetWaterLevel_Level(),t=$("#modal-waterlevel-table").find("tbody");for(var r in e){var a=e[r],n=document.createElement("tr"),l=document.createElement("td"),o=document.createElement("td");l.bgColor=JH.GetJsonValue(a,"color"),o.innerText=TRANSLATOR[JH.GetJsonValue(a,"trans")],n.appendChild(l),n.appendChild(o),t.append(n)}},GetWaterLevel_Scale:function(){return srvTHF.Get("WaterLevel_scale")},GetWaterLevel_Rule:function(){return srvTHF.Get("WaterLevel_rule")},GetWaterLevel_Level:function(){return srvTHF.Get("WaterLevel_level")},GetWaterLevel_NoStorage:function(){return srvTHF.Get("WaterLevel_no_storage")},GetWaterLevel_NotToday:function(){return srvTHF.Get("WaterLevel_not_today")},WaterLevel_GetColor:function(e){return""===e?"":srvTHF.GetValue(srvTHF.GetWaterLevel_Scale(),e,"operator","term","color")},WaterLevel_GetColorName:function(e){return""===e?"":srvTHF.GetValue(srvTHF.GetWaterLevel_Scale(),e,"operator","term","colorname")},CCTV_GetColorName:function(e){return"img"==e?"img":"vdo"==e?"vdo":void 0},WaterLevel_GetRulelevel:function(e){return""===e?"":srvTHF.GetValue(srvTHF.GetWaterLevel_Rule(),e,"operator","term","level")},WaterLevel_GetlevelColor:function(e){return""===e?"":JH.GetJsonValue(srvTHF.GetWaterLevel_Level(),e+".color")},WaterLevel_GetlevelColorName:function(e){return""===e?"":JH.GetJsonValue(srvTHF.GetWaterLevel_Level(),e+".colorname")},WaterLevel_GetSituation:function(e,t){return""===e?"":"<font color='"+srvTHF.WaterLevel_GetColor(e)+"'>"+JH.GetJsonValue(t,srvTHF.GetValue(srvTHF.GetWaterLevel_Scale(),e,"operator","term","trans"))+"</font>"},WaterLevel_Marker:function(e,t,r){return srvTHF.GenMarker(e,t,"user-marker user-marker-waterlevel user-marker-waterlevel-"+r)},CCTV_Marker:function(e,t,r){return srvTHF.GenMarker(e,t,"user-marker user-marker-cctv user-marker-cctv-"+r)},SetDam_Scale:function(e){srvTHF.Set("Dam_scale",e.scale),srvTHF.Set("Dam_Low",e.low),srvTHF.Set("Dam_High",e.high),srvTHF.Set("Dam_Low_Text",e.low_text),srvTHF.Set("Dam_High_Text",e.high_text)},renderModalDamTable:function(){var e=$("#modal-dam-table").find("tbody"),t=srvTHF.GetDam_Setting_Low(),r=document.createElement("tr"),a=document.createElement("td"),n=document.createElement("td");a.bgColor=JH.GetJsonValue(t,"color"),n.innerText=TRANSLATOR[JH.GetJsonValue(t,"trans")],r.appendChild(a),r.appendChild(n),e.append(r);var l=srvTHF.GetDam_Setting_High();r=document.createElement("tr"),a=document.createElement("td"),n=document.createElement("td");a.bgColor=JH.GetJsonValue(l,"color"),n.innerText=TRANSLATOR[JH.GetJsonValue(l,"trans")],r.appendChild(a),r.appendChild(n),e.append(r)},GetDam_Scale:function(){return srvTHF.Get("Dam_scale")},GetDam_Setting_Low:function(){return srvTHF.Get("Dam_Low")},GetDam_Setting_High:function(){return srvTHF.Get("Dam_High")},GetDam_Setting_LowText:function(){return srvTHF.Get("Dam_Low_Text")},GetDam_Setting_HighText:function(){return srvTHF.Get("Dam_High_Text")},Dam_GetColor:function(e){return srvTHF.GetValue(srvTHF.GetDam_Scale(),e,"operator","term","color")},Dam_GetColorname:function(e){return srvTHF.GetValue(srvTHF.GetDam_Scale(),e,"operator","term","colorname")},Dam_SortData:function(e){srvTHF.Dam_Low=[],srvTHF.Dam_High=[],srvTHF.Dam_text={};for(var t=0;t<e.length;t++){var r=e[t],a=JH.GetJsonValue(r,"dam_uses_water_percent");a=numeral(Math.round(a)).format("0,0");var n=JH.GetJsonValue(r,"dam_storage_percent");(n=numeral(Math.round(n)).format("0,0"))>80?srvTHF.Dam_High.push(r):a<=20&&srvTHF.Dam_Low.push(r)}srvTHF.Dam_Low.sort(function(e,t){return e.dam_uses_water_percent-t.dam_uses_water_percent}),srvTHF.Dam_High.sort(function(e,t){return t.dam_storage_percent-e.dam_storage_percent})},GetDam_Low_Text:function(){return srvTHF.GetDam_Text(srvTHF.Dam_Low,"low")},GetDam_High_Text:function(){return srvTHF.GetDam_Text(srvTHF.Dam_High,"high")},GetDam_Text:function(e,t){if(JH.GetJsonValue(srvTHF.Dam_text,t))return JH.GetJsonValue(srvTHF.Dam_text,t);srvTHF.Dam_text[t]="";for(var r="",a=0;a<e.length;a++){0!=a&&(r+=",");var n=e[a];r+=" <label>"+srvTHF.Get("dam")+JH.GetJsonLangValue(n.dam,"dam_name").replace("*","")+" (";var l="";l="high"==t?JH.GetJsonValue(n,"dam_storage_percent"):JH.GetJsonValue(n,"dam_uses_water_percent"),r+=(l=numeral(Math.round(l)).format("0,0"))+"%)</label>"}return srvTHF.Dam_text[t]=r,r},Dam_Marker:function(e,t,r){return srvTHF.GenMarker(e,t,"user-marker user-marker-dam user-marker-dam-"+r)},SetWaterQuality_Setting:function(e){srvTHF.Set("WaterQuality_Scale",JH.GetJsonValue(e,"scale")),srvTHF.Set("WaterQuality_Display",JH.GetJsonValue(e,"display")),srvTHF.Set("WaterQuality_Default",JH.GetJsonValue(e,"default")),srvTHF.Set("WaterQuality_not_today",JH.GetJsonValue(e,"not_today"))},renderModalWaterqualityTable:function(){for(var e=srvTHF.GetWaterQuality_Scale(),t=$("#modal-waterquality-salinity-table").find("tbody"),r=0;r<e.salinity.length;r++){var a=e.salinity[r],n=document.createElement("tr"),l=document.createElement("td"),o=document.createElement("td"),u=document.createElement("td");l.bgColor=JH.GetJsonValue(a,"color"),o.innerText=TRANSLATOR["salinity_value_"+a.operator].replace("%s",a.term),u.innerText=TRANSLATOR[JH.GetJsonValue(a,"trans")],n.appendChild(l),n.appendChild(o),n.appendChild(u),t.append(n)}var i=$("#modal-waterquality-do-table").find("tbody");for(r=0;r<e.do.length;r++){a=e.do[r],n=document.createElement("tr"),l=document.createElement("td"),o=document.createElement("td"),u=document.createElement("td");l.bgColor=JH.GetJsonValue(a,"color"),o.innerText=TRANSLATOR["salinity_value_"+a.operator].replace("%s",a.term),u.innerText=TRANSLATOR[JH.GetJsonValue(a,"trans")],n.appendChild(l),n.appendChild(o),n.appendChild(u),i.append(n)}var s=$("#modal-waterquality-ph-table").find("tbody");for(r=0;r<e.ph.length;r++){a=e.ph[r],n=document.createElement("tr"),l=document.createElement("td"),o=document.createElement("td"),u=document.createElement("td");l.bgColor=JH.GetJsonValue(a,"color"),o.innerText=JH.GetJsonValue(a,"text"),u.innerText=TRANSLATOR[JH.GetJsonValue(a,"trans")],n.appendChild(l),n.appendChild(o),n.appendChild(u),s.append(n)}var c=$("#modal-waterquality-turbid-table").find("tbody");for(r=0;r<e.turbid.length;r++){a=e.turbid[r],n=document.createElement("tr"),l=document.createElement("td"),o=document.createElement("td"),u=document.createElement("td");l.bgColor=JH.GetJsonValue(a,"color"),o.innerText=JH.GetJsonValue(a,"text"),u.innerText=TRANSLATOR[JH.GetJsonValue(a,"trans")],n.appendChild(l),n.appendChild(o),n.appendChild(u),c.append(n)}var d=$("#modal-waterquality-tds-table").find("tbody");for(r=0;r<e.tds.length;r++){a=e.tds[r],n=document.createElement("tr"),l=document.createElement("td"),o=document.createElement("td"),u=document.createElement("td");l.bgColor=JH.GetJsonValue(a,"color"),o.innerText=JH.GetJsonValue(a,"operator")+JH.GetJsonValue(a,"term"),u.innerText=TRANSLATOR[JH.GetJsonValue(a,"trans")],n.appendChild(l),n.appendChild(o),n.appendChild(u),d.append(n)}},GetWaterQuality_Scale:function(){return srvTHF.Get("WaterQuality_Scale")},GetWaterQuality_Display:function(){return srvTHF.Get("WaterQuality_Display")},GetWaterQuality_Default:function(){return srvTHF.Get("WaterQuality_Default")},GetWaterQuality_not_today:function(){return srvTHF.Get("WaterQuality_not_today")},WaterQuality_GetMarkerColor:function(e){var t=!0,r=!0,a=!0,n=!0,l=!0,o=srvTHF.GetWaterQuality_Default().color;return""!==JH.GetJsonValue(e,"waterquality_salinity")&&(t=srvTHF.WaterQuality_GetColor_salinity(JH.GetJsonValue_Float(e,"waterquality_salinity"))==o),""!==JH.GetJsonValue(e,"waterquality_ph")&&(r=srvTHF.WaterQuality_GetColor_ph(JH.GetJsonValue_Float(e,"waterquality_ph"))==o),""!==JH.GetJsonValue(e,"waterquality_turbid")&&(a=srvTHF.WaterQuality_GetColor_turbid(JH.GetJsonValue_Float(e,"waterquality_turbid"))==o),""!==JH.GetJsonValue(e,"waterquality_tds")&&(n=srvTHF.WaterQuality_GetColor_tds(JH.GetJsonValue_Float(e,"waterquality_tds"))==o),""!==JH.GetJsonValue(e,"waterquality_do")&&(l=srvTHF.WaterQuality_GetColor_do(JH.GetJsonValue_Float(e,"waterquality_do"))==o),t&&r&&a&&n&&l?o:"red"},WaterQuality_GetColor:function(e,t){return color=srvTHF.GetValue(e,t,"operator","term","color"),""==color&&(color=srvTHF.GetWaterQuality_Default().color),color},WaterQuality_GetColor_salinity:function(e){return srvTHF.WaterQuality_GetColor(JH.GetJsonValue(srvTHF.GetWaterQuality_Scale(),"salinity"),e)},WaterQuality_GetColor_do:function(e){return srvTHF.WaterQuality_GetColor(JH.GetJsonValue(srvTHF.GetWaterQuality_Scale(),"do"),e)},WaterQuality_GetColor_ph:function(e){return srvTHF.WaterQuality_GetColor(JH.GetJsonValue(srvTHF.GetWaterQuality_Scale(),"ph"),e)},WaterQuality_GetColor_turbid:function(e){return srvTHF.WaterQuality_GetColor(JH.GetJsonValue(srvTHF.GetWaterQuality_Scale(),"turbid"),e)},WaterQuality_GetColor_tds:function(e){return srvTHF.WaterQuality_GetColor(JH.GetJsonValue(srvTHF.GetWaterQuality_Scale(),"tds"),e)},WaterQuality_GetText_:function(e,t){return srvTHF.GetValue(JH.GetJsonValue(srvTHF.GetWaterQuality_Scale(),t),e,"operator","term","text")},WaterQuality_Marker:function(e,t,r){return srvTHF.GenMarker(e,t,"user-marker user-marker-waterquality user-marker-waterquality-"+r)},SetStorm_Setting:function(e){srvTHF.Set("Storm_Scale",e)},GetStorm_Scale:function(){return srvTHF.Get("Storm_Scale")},Storm_GetColor:function(e){return srvTHF.GetValue(srvTHF.GetStorm_Scale(),e,"operator","term","color")},renderModalStormTable:function(){var e=srvTHF.GetStorm_Scale().slice(0);e.reverse();for(var t=$("#modal-storm-table").find("tbody"),r=0;r<e.length;r++){var a=e[r],n=document.createElement("tr"),l=document.createElement("td"),o=document.createElement("td"),u=document.createElement("td"),i=document.createElement("td"),s=document.createElement("td");l.innerText=JH.GetJsonValue(a,"strength"),o.bgColor=JH.GetJsonValue(a,"color"),o.innerText=JH.GetJsonValue(a,"category"),u.innerText=JH.GetJsonValue(a,"knots_text"),i.innerText=JH.GetJsonValue(a,"mph_text"),s.innerText=JH.GetJsonValue(a,"kmh_text"),n.appendChild(l),n.appendChild(o),n.appendChild(u),n.appendChild(i),n.appendChild(s),t.append(n)}},SetPreRain_Setting:function(e){srvTHF.Set("PreRain_Rule",JH.GetJsonValue(e,"rule")),srvTHF.Set("PreRain_LevelText",JH.GetJsonValue(e,"level-text"))},renderModalClockTable:function(){var e=srvTHF.GetPreRain_LevelText(),t=$("#modal-clock-table").find("tbody");for(var r in e){var a=e[r],n=document.createElement("tr"),l=document.createElement("td"),o=document.createElement("td");l.bgColor=JH.GetJsonValue(a,"color"),o.innerText=TRANSLATOR[JH.GetJsonValue(a,"trans")],n.appendChild(l),n.appendChild(o),t.append(n)}},GetPreRain_LevelText:function(){return srvTHF.Get("PreRain_LevelText")},GetPreRain_Rule:function(){return srvTHF.Get("PreRain_Rule")},PreRain_GetLevel:function(e,t){return srvTHF.GetValue(JH.GetJsonValue(srvTHF.GetPreRain_Rule(),e),t,"operator","term","level")},SetWave_Setting:function(e){srvTHF.Set("Wave_Setting",e)},renderModalWaveTable:function(){var e=srvTHF.GetWave_Setting(),t=$("#modal-wave-table").find("tbody"),r=document.createElement("tr"),a=document.createElement("td"),n=document.createElement("td");a.bgColor=JH.GetJsonValue(e,"color"),n.innerText=TRANSLATOR[JH.GetJsonValue(e,"trans")],r.appendChild(a),r.appendChild(n),t.append(r)},GetWave_Setting:function(){return srvTHF.Get("Wave_Setting")},Wave_Marker:function(e,t,r){return srvTHF.GenMarker(e,t,"user-marker user-marker-wave user-marker-wave-"+r)},SetWarning_Setting:function(e){srvTHF.Set("Warning_Setting",e)},GetWarning_Setting:function(){return srvTHF.Get("Warning_Setting")}};